<div class="product-card">
  <h2 class="card-header">
    <mat-icon>inventory_2</mat-icon>
    {{ id ? 'Update Product' : 'Add Product' }}
  </h2>

  <form [formGroup]="productForm" class="product-form">
    <!-- Row 1 -->
    <mat-form-field appearance="fill">
      <mat-label>ğŸ“Œ Product Name</mat-label>
      <input matInput placeholder="Enter product name" formControlName="name" />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>ğŸ’° Price</mat-label>
      <input matInput type="number" placeholder="Enter price" formControlName="price" />
    </mat-form-field>

    <!-- Row 2 (Full width) -->
    <mat-form-field appearance="fill" class="full-width">
      <mat-label>ğŸ“ Description</mat-label>
      <textarea
        matInput
        rows="3"
        placeholder="Enter product description"
        formControlName="description"
      ></textarea>
    </mat-form-field>

    <!-- Row 3 -->
    <mat-form-field appearance="fill">
      <mat-label>ğŸ·ï¸ Discount (%)</mat-label>
      <input
        matInput
        type="number"
        placeholder="Enter discount percentage"
        formControlName="discount"
      />
    </mat-form-field>

    <!-- Row 4 (Images full width) -->
    <div formArrayName="images" class="image-section">
      <label class="section-title">ğŸ“¸ Product Images</label>
      <div *ngFor="let img of images.controls; let i = index" class="image-field">
        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Image URL</mat-label>
          <input matInput [formControlName]="i" placeholder="Enter image URL" />
        </mat-form-field>
        <button mat-raised-button color="warn" (click)="removeImage(i)">Delete</button>
      </div>
      <button mat-raised-button color="accent" (click)="addImage()">â• Add Image</button>
    </div>

    <!-- Row 5 -->
    <mat-form-field appearance="fill">
      <mat-label>ğŸ“ Category</mat-label>
      <mat-select formControlName="categoryID">
        <mat-option *ngIf="isLoadingCategories" disabled>Loading...</mat-option>
        <mat-option *ngFor="let cat of categories" [value]="cat._id">{{ cat.name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>ğŸ¢ Brand</mat-label>
      <mat-select formControlName="brandID">
        <mat-option *ngIf="isLoadingBrands" disabled>Loading...</mat-option>
        <mat-option *ngFor="let brand of brands" [value]="brand._id">{{ brand.name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <!-- Actions (full width) -->
    <div class="form-actions">
      <button
        mat-raised-button
        color="primary"
        [disabled]="productForm.invalid"
        (click)="id ? Update() : addproduct()"
      >
        <mat-icon>save</mat-icon>
        {{ id ? 'Update Product' : 'Save Product' }}
      </button>
    </div>
  </form>
</div>

<div class="product-page grid grid-cols-1 lg:grid-cols-4 gap-6 p-6 bg-gray-50 min-h-screen">

  <!-- 🧩 Filters Sidebar -->
  <aside class="filters bg-white p-6 rounded-2xl shadow-sm border lg:col-span-1">
    <h3 class="text-xl font-semibold mb-4 text-green-700">Filters</h3>
    <p class="text-sm text-gray-500 mb-6">Refine the product list</p>

    <!-- 🔍 Search -->
    <label class="block text-sm font-medium text-gray-700 mb-1">Search</label>
    <input
      [(ngModel)]="searchterm"
      type="text"
      placeholder="Search products..."
      class="w-full p-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-green-400 outline-none"
    />

    <!-- 📂 Category -->
    <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
    <select
      [(ngModel)]="categoryID"
      class="w-full p-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-green-400 outline-none"
    >
      <option value="">All</option>
      <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
    </select>

    <!-- 🏷️ Brand -->
    <label class="block text-sm font-medium text-gray-700 mb-1">Brand</label>
    <select
      [(ngModel)]="brandID"
      class="w-full p-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-green-400 outline-none"
    >
      <option value="">All</option>
      <option *ngFor="let brand of brands" [value]="brand.id">{{ brand.name }}</option>
    </select>

    <!-- 🔽 Sort -->
    <label class="block text-sm font-medium text-gray-700 mb-1">Sort by</label>
    <select
      [(ngModel)]="sortby"
      class="w-full p-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-green-400 outline-none"
    >
      <option value="">Default</option>
      <option value="price">Price</option>
      <option value="rating">Rating</option>
      <option value="name">Name</option>
    </select>

    <label class="block text-sm font-medium text-gray-700 mb-1">Sort order</label>
    <select
      [(ngModel)]="sortOrder"
      class="w-full p-2 border border-gray-300 rounded-lg mb-6 focus:ring-2 focus:ring-green-400 outline-none"
    >
      <option [value]="1">Ascending</option>
      <option [value]="-1">Descending</option>
    </select>

    <!-- Buttons -->
    <div class="flex gap-2">
      <button
        (click)="applyFilters()"
        class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all"
      >
        Apply
      </button>
      <button
        (click)="resetFilters()"
        class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium px-4 py-2 rounded-lg transition-all"
      >
        Reset
      </button>
    </div>
  </aside>

  <!-- 🌿 Product Listing -->
  <section class="products lg:col-span-3">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold text-green-800">All Products</h2>
      <span class="text-sm text-gray-500">{{ totalProducts }} results</span>
    </div>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3" *ngIf="products.length > 0; else noProducts">
      <app-product-card
        *ngFor="let product of products"
        [product]="product"
        [currentImage]="getCurrentImage(product)"
      >
      </app-product-card>
    </div>

    <ng-template #noProducts>
      <div class="text-center text-gray-500 mt-20">
        <p>No products found. Try adjusting your filters.</p>
      </div>
    </ng-template>

    <!-- 🔘 Pagination Buttons -->
    <div class="flex justify-center items-center gap-4 mt-6" *ngIf="totalProducts > pagesize">
      <button
        (click)="prevPage()"
        [disabled]="page === 1"
        class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium px-4 py-2 rounded-lg transition-all disabled:opacity-50"
      >
        ⬅ Previous
      </button>

      <span class="text-gray-600">Page {{ page }} of {{ totalPages }}</span>

      <button
        (click)="nextPage()"
        [disabled]="page === totalPages"
        class="bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-lg shadow transition-all disabled:opacity-50"
      >
        Next ➡
      </button>
    </div>
  </section>
</div>
